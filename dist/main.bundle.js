!function(e){function t(t){for(var o,s,r=t[0],d=t[1],c=t[2],h=0,u=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);for(l&&l(t);u.length;)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var d=n[r];0!==i[d]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={0:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window.webpackJsonp=window.webpackJsonp||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var l=d;a.push([33,1]),n()}([,,,,,,function(e,t,n){e.exports=n.p+"img/94a32c5e0b0e6a8ec6674ca0bdef9e2d.jpg"},function(e,t,n){e.exports=n.p+"img/2e30a298a25f6a738bf964d898dfcc6b.jpg"},function(e,t,n){e.exports=n.p+"img/c498df4d2e493cdde083af5b2497acfb.jpg"},,,,,,,,,function(e,t,n){e.exports=n.p+"img/c06af6c3402d57913332cecb337fc1c3.png"},function(e,t,n){e.exports=n.p+"media/2912160eecc6f2adc09298e4293050bc.wav"},function(e,t,n){e.exports=n.p+"media/688907cb9cefb573e8272bd08663ffdb.ogg"},function(e,t,n){e.exports=n.p+"media/8d0a0c564b73a5756ebf118588166c73.wav"},function(e,t,n){e.exports=n.p+"media/e4cc519287132b9c9b7d458b1bd627a8.wav"},function(e,t,n){e.exports=n.p+"media/2458174202115380a80e901c2f544be9.ogg"},function(e,t,n){e.exports=n.p+"media/13aa3f180357c9c864ae965343bc97ef.ogg"},function(e,t,n){e.exports=n.p+"media/662da74e4de9c84596546c5f6220eb11.ogg"},function(e,t,n){var o=n(26);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=e.exports=n(12)(!1)).i(n(27),""),t.push([e.i,"/* @import '../../node_modules/bootstrap/dist/css/bootstrap.min.css'; */\r\n/* @import './../scss/custom.scss'; */\r\n\r\n\r\nbody { \r\n    margin:0; \r\n    padding:0; \r\n    background-color:#000; \r\n    overflow: hidden;\r\n}\r\ncanvas { \r\n    width: 100%; \r\n    height: 100%;\r\n    /* z-index:-1; */\r\n}",""])},,,,,,,function(e,t,n){"use strict";n.r(t);n(25);var o=n(10),i=n(0),a=n(5),s=n(1),r=n.n(s),d=n(14),c=n.n(d),l={maxAnisotropy:0,dpr:1,scene:{background:460551},fog:{color:460551,near:.007},camera:{fov:40,near:1,far:500,aspect:1,position:{x:0,y:1.7,z:-5}},postprocessing:{focalLength:.8,focus:4,darkness:.4,luminanceThreshold:.1,luminanceSmoothing:.2,CAoffset:.001},block:{count:3,depth:8,width:4,height:2.4,thickness:.2},rectLight:{mesh:{width:1.5,height:.04,depth:.2,color:8947746,emissive:6710835,offEmissive:131586},crash:{enabled:!0,number:2,angle:90},position:{x:0,z:-2},color:16777130,intensity:18,width:2,height:.2},turnLight:{color:16729088,intensity:.9,distance:7,angle:Math.PI/2.5,exponent:1,decay:1.5,material:{offEmissive:328960,emissive:16746496},position:{x:0,z:1}},hemiLight:{hColor:0,sColor:0,lColor:1,groundHColor:.4,groundSColor:1,groundLColor:.5,intensity:.06,x:0,y:-1,z:0},controls:{autoRotate:!1,autoRotateSpeed:-.1,rotateSpeed:.1,enableDamping:!0,dampingFactor:.15,enableZoom:!0,zoomSpeed:1.8,minDistance:2,maxDistance:3,minPolarAngle:Math.PI/2.5,maxPolarAngle:Math.PI/1.8,minAzimuthAngle:-Math.PI,maxAzimuthAngle:Math.PI,enablePan:!1,target:{x:0,y:2,z:15}},ambientLight:{enabled:!1,color:5592405},shadow:{enabled:!1,helperEnabled:!1,bias:-1e-4,mapWidth:4096,mapHeight:4096,near:40,far:70,top:50,right:50,bottom:-50,left:-50},directionalLight:{castShadow:!1,colorH:.1,colorS:.8,colorL:.9,intensity:.2,x:0,y:0,z:-1,multiplyScalarPosition:10}};n(30);class h{constructor(e,t,n){const o=l.controls;this.camera=e;const a=(new i.Vector3).copy(o.target);let s=0,r=0,d=0,c=0;function h(e){const t=window.innerWidth>>1,n=window.innerHeight>>1;s=e.clientX-t,r=e.clientY-n,d=s/(window.innerWidth/2),c=r/(window.innerHeight/2)}t.addEventListener("mousemove",h,!1),t.addEventListener("touchmove",(function(e){e.preventDefault(),h(e.touches[0])}),!1),this.update=function(t){a.x+=(5*-d-a.x)/10,a.y+=(-5*c+1-a.y)/50,e.lookAt(a)}}}class u{constructor(e){this.container=e,this.threeRenderer=new i.WebGLRenderer({antialias:!1}),this.threeRenderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.threeRenderer.domElement),this.threeRenderer.shadowMap.enabled=l.shadow.enabled,this.threeRenderer.shadowMap.type=i.PCFSoftShadowMap,l.maxAnisotropy=this.threeRenderer.capabilities.getMaxAnisotropy(),this.updateSize(),document.addEventListener("DOMContentLoaded",()=>this.updateSize(),!1),window.addEventListener("resize",()=>this.updateSize(),!1)}updateSize(){this.threeRenderer.setSize(window.innerWidth,window.innerHeight)}render(e,t){this.threeRenderer.render(e,t)}}class p{constructor(e){const t=l.camera.fov,n=l.camera.near,o=l.camera.far,a=e.domElement.width/e.domElement.height;this.threeCamera=new i.PerspectiveCamera(t,a,n,o),this.threeCamera.position.copy(l.camera.position),this.updateSize(e),window.addEventListener("resize",()=>this.updateSize(e),!1)}updateSize(e){this.threeCamera.aspect=e.domElement.width/e.domElement.height,this.threeCamera.updateProjectionMatrix()}}var m=n(2),g=n.n(m),f=n(3),w=n(4);f.b.add(w.d);class b{constructor(e){const t=document.createElement("div");t.className="d-flex justify-content-between align-items-center position-absolute fixed-bottom mb-2 mr-2",e.appendChild(t);const n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div");t.appendChild(n),t.appendChild(o),t.appendChild(i);const a=document.createElement("span");a.innerHTML=Object(f.a)(w.g,{styles:{color:"#fff",filter:"drop-shadow(0px 0px 3px rgba(0,0,0))"},classes:["fa-lg","text-danger"]}).html,a.className="bg-transparent",a.setAttribute("type","button"),this.playButton=a;const s=document.createElement("span");s.innerHTML=Object(f.a)(w.f,{classes:["fa-lg","text-primary"]}).html,s.style.textShadow="0 0 8px white",s.className="bg-transparent",s.setAttribute("type","button"),g()(s).hide(),this.resetButton=s,o.appendChild(a),o.appendChild(s);const r=document.createElement("button");r.className="shadow-none text-black ml-3 bg-transparent border-0 p-2",r.setAttribute("type","button");const d=Object(f.a)(w.e,{classes:["fa-lg","text-dark"]}).html;r.innerHTML=d,r.onclick=function(){g()(u).fadeToggle(),g()(p).is(":visible")&&g()(p).hide()};const c=document.createElement("button");c.className="text-black ml-3 bg-transparent border-0 p-2",c.setAttribute("type","button"),c.innerHTML=Object(f.a)(w.a,{classes:["fa-lg","text-dark"]}).html,c.onclick=function(){g()(p).fadeToggle(),g()(u).is(":visible")&&g()(u).hide()};const h=document.createElement("button");h.className="text-black ml-3 bg-transparent border-0 p-2",h.setAttribute("type","button"),this.vol=Object(f.a)(w.i,{classes:["fa-lg","text-primary"]}).html,h.innerHTML=this.vol,this.mute=Object(f.a)(w.h,{classes:["text-dark","fa-lg"]}).html,this.tray=h,n.appendChild(r),n.appendChild(c),n.appendChild(h),this.fullIcon=Object(f.a)(w.c,{classes:["text-dark","fa-lg"]}).html,this.shrinkIcon=Object(f.a)(w.b,{classes:["text-dark","fa-lg"]}).html,this.button3=document.createElement("span"),this.button3.className="text-black ml-3 bg-transparent border-0 p-2",this.button3.setAttribute("type","button"),this.button3.style.right=0,this.button3.style.bottom=0,this.button3.innerHTML=this.fullIcon,i.appendChild(this.button3);const u=document.createElement("div");u.className="position-absolute bg-dark text-secondary p-2 m-4 card",u.style.top=0,u.innerHTML='\n        <div class="card-body">\n            <div class="card mb-3 bg-secondary text-white">\n                <div class="card-header">\n                    Tunnel Demo (2019)\n                </div>\n                <div class="card-body bg-dark">\n                    Three.js r119, Shader-Particle-Engine, Rectangle-Area Lights, Postprocessing\n                </div>\n            </div>\n            <div class="card bg-secondary text-light">\n                <div class="card-header">References</div>\n                    <table class="table table-dark mb-0">\n                        <thead class="thead-dark">\n                            <tr>\n                                <th>Artist</th>\n                                <th>Work</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                        <tr>\n                            <td>Yughues</td>\n                            <td><a href="https://www.deviantart.com/yughues/art/Free-textures-pack-41-352194217" target="_blank">Free textures pack 41</a></td>\n                        </tr>\n                        <tr>\n                            <td>ModulationStation</td>\n                            <td><a href="https://freesound.org/people/ModulationStation/sounds/131599/" target="_blank">Kill Switch</a></td>\n                        </tr>\n                        <tr>\n                            <td>mirkosukovic</td>\n                            <td><a href="https://freesound.org/people/mirkosukovic/sounds/435666/" target="_blank">Alarm Siren</a></td>\n                        </tr>\n                        <tr>\n                            <td>iSaria</td>\n                            <td><a href="https://freesound.org/people/iSaria/sounds/326261/" target="_blank">zombi purr 2</a></td>\n                        </tr>\n                        <tr>\n                            <td>steveygos93</td>\n                            <td><a href="https://freesound.org/people/steveygos93/sounds/80401/" target="_blank">Explosion 2</a></td>\n                        </tr>\n                        <tr>\n                            <td>kingof_thelab</td>\n                            <td><a href="https://freesound.org/people/kingof_thelab/sounds/340255/" target="_blank">Steam Loop Body</a></td>\n                        </tr>\n                        <tr>\n                            <td>LamaMakesMusic</td>\n                            <td><a href="https://freesound.org/people/LamaMakesMusic/sounds/403537/" target="_blank">Door_Heavy_Reverb_Open_Close</a></td>\n                        </tr>\n                        <tr>\n                            <td> felixmariotto </td>\n                            <td><a href="https://github.com/felixmariotto/three-screenshake" target="_blank">Camera Shake</a></td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n        </div>',g()(u).hide(),e.appendChild(u);const p=document.createElement("div");p.className="position-absolute bg-dark text-secondary p-2 m-4 card",p.style.top=0,p.innerHTML='\n        <div class="card-body">\n        <div class="input-group" role="group" aria-label="Basic example">\n        <div class="input-group-prepend">\n            <div class="input-group-text" id="btnGroupAddon">/?lights=</div>\n        </div>\n        <input type="number" class="form-control" placeholder="'+l.block.count+'" id="lightInput" aria-label="Input group example" aria-describedby="btnGroupAddon">\n        <button type="button" onclick="{ \n            window.location.href = location.protocol + \'//\' + location.host + location.pathname +\'?lights=\'+ document.getElementById(\'lightInput\').value; \n        }" class="btn btn-secondary">reload</button>\n        </div>\n      </div>',g()(p).hide(),e.appendChild(p)}}class y{constructor(e,t,n,o){let a=0,s=void 0,r=n.slice(0),d=!1,c=!0;const l=new i.Raycaster;l.layers.set(1);const h=new i.Vector2,u=new b(e);function p(){c=!c,r=n.slice(0)}function m(){r.length>0&&(d=!0,g()(u.playButton).fadeOut(),g()(u.resetButton).fadeOut())}u.playButton.onclick=()=>{n[0].button.userData.move(!1),m()},u.resetButton.onclick=()=>{p(),n[0].button.userData.move(!0),m()},this.update=function(e){n.forEach(t=>t.update(e)),a+=e,!d||r.length<1||a<1||(s=r.pop(),a=0,c?s.off():s.on(),0===r.length&&(d=!1,c?setTimeout(()=>{d||g()(u.resetButton).fadeIn()},3e3):(p(),g()(u.playButton).fadeIn())))},u.button3.onclick=function(){var e,t,n,o;this.toggle?u.button3.innerHTML=u.fullIcon:u.button3.innerHTML=u.shrinkIcon,this.toggle=!this.toggle,e=window.document,t=e.documentElement,n=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen,o=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen,e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement?o.call(e):n.call(t)},u.tray.onclick=function(){this.toggle?(this.toggle=!1,t.setMasterVolume(1),u.tray.innerHTML=u.vol):(this.toggle=!0,t.setMasterVolume(0),u.tray.innerHTML=u.mute)},e.addEventListener("mousedown",(function(e){w.length>0&&(0!==r.length&&c?(w[0].object.userData.move(!1),m()):(w[0].object.userData.move(!0),p(),m()))}),!1),e.addEventListener("mousemove",(function(e){h.set(e.clientX/window.innerWidth*2-1,-e.clientY/window.innerHeight*2+1),l.setFromCamera(h,o),w=l.intersectObjects(f,!0),w.length>0?document.body.style.cursor="pointer":document.body.style.cursor="default"}),!1);const f=r.map(e=>e.mesh);let w=[]}}class v{constructor(e,t,n){this.scene=e,this.camera=t,this.init()}init(){this.ambientLight=new i.AmbientLight(l.ambientLight.color),this.hemiLight=new i.HemisphereLight,this.hemiLight.intensity=l.hemiLight.intensity,this.hemiLight.color.setHSL(l.hemiLight.hColor,l.hemiLight.sColor,l.hemiLight.lColor),this.hemiLight.groundColor.setHSL(l.hemiLight.groundHColor,l.hemiLight.groundSColor,l.hemiLight.groundLColor),this.hemiLight.position.set(l.hemiLight.x,l.hemiLight.y,l.hemiLight.z),this.directionalLight=new i.DirectionalLight,this.directionalLight.intensity=l.directionalLight.intensity,this.directionalLight.color.setHSL(l.directionalLight.colorH,l.directionalLight.colorS,l.directionalLight.colorL),this.directionalLight.position.set(l.directionalLight.x,l.directionalLight.y,l.directionalLight.z),this.directionalLight.position.multiplyScalar(l.directionalLight.multiplyScalarPosition),this.directionalLight.castShadow=l.directionalLight.castShadow,this.directionalLight.shadow.bias=l.shadow.bias,this.directionalLight.shadow.camera.near=l.shadow.near,this.directionalLight.shadow.camera.far=l.shadow.far,this.directionalLight.shadow.camera.left=l.shadow.left,this.directionalLight.shadow.camera.right=l.shadow.right,this.directionalLight.shadow.camera.top=l.shadow.top,this.directionalLight.shadow.camera.bottom=l.shadow.bottom,this.directionalLight.shadow.mapSize.width=l.shadow.mapWidth,this.directionalLight.shadow.mapSize.height=l.shadow.mapHeight,this.directionalLightHelper=new i.CameraHelper(this.directionalLight.shadow.camera),this.directionalLightHelper.visible=l.shadow.helperEnabled}place(e){switch(e){case"ambient":this.scene.add(this.ambientLight);break;case"spot":this.scene.add(this.spotlight),this.scene.add(this.spotlight.target),this.scene.add(this.spotLightHelper);break;case"directional":this.scene.add(this.directionalLight),this.scene.add(this.directionalLightHelper);break;case"point":this.scene.add(this.pointLight);break;case"hemi":this.scene.add(this.hemiLight)}}}class x{constructor(e,t){this.turning=!0;const n=l.turnLight,o=l.block.height,a=new i.SpotLight(l.turnLight.color,l.turnLight.intensity,l.turnLight.distance,l.turnLight.angle,l.turnLight.exponent,l.turnLight.decay);let s=t*Math.PI/2;a.userData.update=function(e){s+=4*e,a.target.position.z=n.position.z+Math.cos(s),a.target.position.x=n.position.x+Math.sin(s)},a.position.set(n.position.x,o,n.position.z),a.target.position.set(n.position.x,o-1.5,n.position.z),e.add(a),e.add(a.target);const r=new i.SphereGeometry(.08,16,16),d=(new i.Matrix4).makeTranslation(0,0,-.01);r.merge(r,d,1);const c=new i.MeshLambertMaterial({color:4473924,emissive:n.material.emissive}),h=new i.MeshLambertMaterial({color:4465152,emissive:328960}),u=new i.Mesh(r,[c,h]);u.position.set(0,-.08,0);const p=new i.MeshLambertMaterial({color:8947848,emissive:0}),m=new i.Mesh(new i.CylinderBufferGeometry(.26,.16,.13,8,2),p);e.add(m),m.add(u),m.position.set(n.position.x,o,n.position.z),m.matrixAutoUpdate=!1,m.updateMatrix();const g=new i.Vector3;this.on=function(){c.emissive.setHex(n.material.emissive),a.intensity=n.intensity,this.turning=!0},this.off=function(){c.emissive.setHex(n.material.offEmissive),a.intensity=0,this.turning=!1},this.update=function(e){this.turning&&(a.userData.update(e),u.lookAt(a.target.getWorldPosition(g).x,o-.5,a.target.getWorldPosition(g).z))}}}n(15).a.init();class L{constructor(e,t){const n=l.rectLight;let o=!1,a=0;const s=new i.MeshPhongMaterial({color:n.mesh.color,emissive:n.mesh.emissive}),d=new i.Mesh(new i.BoxBufferGeometry(n.mesh.width,n.mesh.height,n.mesh.depth),[s,s,s,s,s,s]);d.position.set(n.position.x,l.block.height-.01,n.position.z);const c=new i.RectAreaLight(n.color,n.intensity,n.width,n.height);c.rotation.set(-Math.PI/2,0,0),d.add(c);let h=new i.Matrix4,u=new i.Vector3,p=2*Math.random()+0;const m=Math.random()<.5;function g(e){let t=90+5*Math.sin(3*e);return m&&(t*=-1),i.Math.degToRad(t)}m?(h.makeTranslation(n.mesh.width/2,0,0),u.set(n.position.x-n.mesh.width/2,l.block.height,n.position.z),c.position.set(n.position.x+n.mesh.width/2,-.05,0),p*=-1):(h.makeTranslation(-n.mesh.width/2,0,0),u.set(n.position.x+n.mesh.width/2,l.block.height,n.position.z),c.position.set(n.position.x-n.mesh.width/2,-.05,0)),d.rotation.z=i.Math.degToRad(p),d.geometry.applyMatrix4(h),d.position.copy(u),d.matrixAutoUpdate=!1,d.updateMatrix(),e.add(d),this.update=function(e){o&&(a+=e,d.rotation.z=g(a),d.updateMatrix())},this.add=function(e){d.add(e)},this.on=function(){s.emissive.setHex(n.mesh.emissive),c.intensity=n.intensity,t&&(o=!1,a=0,d.rotation.z=i.Math.degToRad(p),d.updateMatrix())},this.off=function(){t?setTimeout((function(){new r.a.Tween(d.rotation).to({z:g(a)},2e3).easing(r.a.Easing.Elastic.Out).onUpdate((function(){d.updateMatrix()})).onComplete((function(){o=!0})).start()}),100):(s.emissive.setHex(n.mesh.offEmissive),c.intensity=0)}}}var M=n(6),k=n.n(M),S=n(7),C=n.n(S),E=n(8),A=n.n(E);const P=new i.TextureLoader,T=P.load(k.a),z=P.load(C.a),H=P.load(A.a),B=new i.MeshStandardMaterial({color:16777215,map:T,normalMap:z,metalnessMap:H,roughness:.4}),D=B.clone();B.roughness=.2,B.color.setHex(11184810);class R{constructor(){const e=new i.Mesh(new i.BoxBufferGeometry(.2,.2,.2),D),t=new i.Mesh(new i.CylinderBufferGeometry(.1,.1,l.block.depth,16),B);return t.geometry.rotateX(Math.PI/2),t.position.set(l.block.width/2-.2,l.block.height-.2,0),t.matrixAutoUpdate=!1,t.updateMatrix(),t.add(e),t}}class j{constructor(e,t){const n=new i.Color(11162965),o=new i.Color(11184725),a=l.block.width,s=l.block.height,d=new i.Mesh(new i.BoxBufferGeometry(.1,.6,.45),e.clone());d.material.color.set(13421772),d.material.map=void 0,window.innerHeight>window.innerWidth?d.position.set(-a/2,s/2+.2,1):d.position.set(-a/2,s/2+.2,-1);const c=o.clone(),h=n.clone(),u=new i.MeshPhongMaterial({}),p=new i.Mesh(new i.BoxBufferGeometry(.2,.1,.3),u);d.userData.button=p,p.layers.enable(1),d.add(p),p.material.emissive=c;let m=new r.a.Tween(c).to(new i.Color(3385907),2e3).yoyo(!0).repeat(1/0).easing(r.a.Easing.Quartic.In),g=new r.a.Tween(h).to(new i.Color(16724787),2e3).yoyo(!0).repeat(1/0).easing(r.a.Easing.Quartic.In);m.start(),p.userData.normal=function(){g.stop(),p.material.emissive=c,m.start()},p.userData.emergency=function(){m.stop(),p.material.emissive=h,g.start()},p.userData.isAnimating=!1,p.userData.move=function(e){this.isAnimating||(this.isAnimating=!0,t[0].play(),new r.a.Tween(p.position).to({x:-.03},200).easing(r.a.Easing.Elastic.Out).yoyo(!0).repeat(1).onStart(()=>{e?p.userData.normal():p.userData.emergency()}).onComplete(()=>{this.isAnimating=!1}).start())},d.userData.emergency=function(){w.material.emissive.set(n),y.material.emissive.set(n),k.userData.emergency(),p.userData.emergency()},d.userData.normal=function(){w.material.emissive.set(o),y.material.emissive.set(o),k.userData.normal(),p.userData.normal()},d.matrixAutoUpdate=!1,d.updateMatrix();let f=new i.CircleBufferGeometry(.01,32);var w=new i.Mesh(f,new i.MeshPhongMaterial({emissive:o}));w.rotation.y=Math.PI/2,w.position.set(.051,-.15,0),d.add(w);let b=new i.PlaneBufferGeometry(.2,.02);var y=new i.Mesh(b,new i.MeshPhongMaterial({emissive:o}));y.rotation.y=Math.PI/2,y.position.set(.051,.2,0),d.add(y);var v=[new i.Vector3(0,-.5,-10),new i.Vector3(0,0,-10),new i.Vector3(0,0,-.4),new i.Vector3(.01,1.1,.1)],x=new i.CatmullRomCurve3(v,!1,"catmullrom",.2),L=new i.TubeBufferGeometry(x,300,.01,12,!1),M=new i.MeshPhongMaterial({color:10066329,emissive:10066261}),k=new i.Mesh(L,M);return k.position.set(0,-s/2,0),k.userData.emergency=function(){k.material.emissive.set(e.emissive)},k.userData.normal=function(){k.material.emissive.set(10066261)},d.add(k),d}}var O=n(16);const I=new i.TextureLoader,_=I.load(k.a),V=I.load(C.a),G=I.load(A.a),F=new i.MeshStandardMaterial({color:16777215,map:_,normalMap:V,metalnessMap:G,roughness:.4,wireframe:!1});F.map.wrapS=F.map.wrapT=i.RepeatWrapping,F.normalMap.wrapS=F.normalMap.wrapT=i.RepeatWrapping,F.metalnessMap.wrapS=F.metalnessMap.wrapT=i.RepeatWrapping,F.map.repeat.set(2,2),F.normalMap.repeat.set(2,2),F.metalnessMap.repeat.set(2,2),F.map.anisotropy=l.maxAnisotropy,F.normalMap.anisotropy=l.maxAnisotropy,F.metalnessMap.anisotropy=l.maxAnisotropy;class W{constructor(e,t){this.sounds=[],this.bonusSounds=[],this.sound_switch=[];let n=void 0;const o=l.block.depth,a=l.block.width,s=l.block.height,d=l.block.thickness,c=new i.BoxGeometry(d,s,o),h=new i.BoxGeometry(a,d,o);h.applyMatrix4((new i.Matrix4).makeTranslation(0,-d/2,0)),h.merge(h,(new i.Matrix4).makeTranslation(0,s+d,0)),h.merge(c,(new i.Matrix4).makeTranslation(a/2+d/2,s/2,0)),h.merge(c,(new i.Matrix4).makeTranslation(-a/2-d/2,s/2,0));const u=new i.Mesh(h,F);u.matrixAutoUpdate=!1,u.position.set(0,0,e*o),u.updateMatrix(),this.mesh=u;const p=new R;u.add(p);let m=!1;e%4==0&&(m=new j(F,this.sound_switch),u.add(m),this.button=m.userData.button);let g=!1;e%3==0&&(g=new x(u,e),g.off());const f=l.rectLight.crash.enabled&&e===l.rectLight.crash.number-1,w=new L(u,f);let b,y;this.addParticle=function(e,t){b=e,y=new O.a(t)},this.update=function(e){g&&g.update(e),w&&f&&w.update(e),y&&y.update()},this.offSound=function(e){n=e},this.addSound=function(e){this.sounds.push(e),w&&w.add(e)},this.addBonusSound=function(e){this.bonusSounds.push(e),u.add(e)},this.on=function(){if(m&&m.userData.normal(),w&&w.on(),g&&g.off(),t){t.play();const e={x:0};new r.a.Tween(e).to({x:1},1e3).onUpdate((function(){t.setVolume(e.x)})).onComplete((function(){})).start()}this.bonusSounds&&(this.bonusSounds.forEach(e=>e.stop()),b&&b.stop()),this.sounds.forEach(e=>e.play())},this.off=function(){m&&m.userData.emergency(),w&&w.off(),g&&g.on(),t&&t.stop(),n&&n.play(),f||this.sounds.forEach(e=>e.play()),this.bonusSounds&&(b&&(b.start(),y.shake(new i.Vector3(Math.random(),.1,.2),300)),this.bonusSounds.forEach(e=>e.play()))}}}var N=n(11),U=n.n(N),q=n(17),X=n.n(q),Y=n(18),J=n.n(Y);class Q{constructor(e,t){let n=new U.a.Group({texture:{value:(new i.TextureLoader).load(X.a)},blending:i.NormalBlending,maxParticleCount:1e3,fog:!1});const o=new i.Vector3(.05,-.05,0),a=new i.Vector3(-.5,.1,0);let s=new U.a.Emitter({particleCount:500,maxAge:{value:3},position:{value:new i.Vector3(1.5,l.block.height-1.3,-1),spread:new i.Vector3(0,0,0)},velocity:{value:a},acceleration:{value:o},wiggle:{spread:1},size:{value:[.01,.5],spread:2},opacity:{value:[0,.01,.04,0]},color:{value:[new i.Color(.4,.3,.2),new i.Color(.4,.3,.2)],spread:new i.Color(.1,.1,.1)},angle:{value:[0,Math.PI]}});s.disable(),n.addEmitter(s),e.add(n.mesh),n.mesh.frustumCulled=!1,this.emitter=s,this.particleGroup=n,this.stop=function(){s.disable(),r.stop()};const r=new i.PositionalAudio(t);(new i.AudioLoader).load(J.a,(function(e){r.setBuffer(e),r.setLoop(!0),r.setVolume(10),n.mesh.add(r)})),this.start=function(){r.play(),s.enable()},this.update=function(e){n&&n.tick(e)}}}var K=n(19),Z=n.n(K),$=n(20),ee=n.n($),te=n(21),ne=n.n(te),oe=n(22),ie=n.n(oe),ae=n(23),se=n.n(ae),re=n(24),de=n.n(re);if(o.a.isWebGLAvailable())!function(){const e=document.body,t=new i.Clock;let n=0;const o=new i.Scene;o.background=new i.Color(l.scene.background),o.fog=new i.FogExp2(l.fog.color,l.fog.near);const s=new c.a;e.appendChild(s.dom);const d=new u(e),m=new p(d.threeRenderer),g=new h(m.threeCamera,d.threeRenderer.domElement,o),f=new a.d(d.threeRenderer),w=new a.f({luminanceGain:2,luminanceThreshold:.2,fringe:0,focalLength:l.postprocessing.focalLength,focus:l.postprocessing.focus}),b=(new a.c(m.threeCamera,{focalLength:.02,bokehScale:1}),new a.b({offset:new i.Vector2(l.postprocessing.CAoffset,l.postprocessing.CAoffset)})),x=new a.h({darkness:l.postprocessing.darkness}),L=new a.a({luminanceThreshold:l.postprocessing.luminanceThreshold,luminanceSmoothing:l.postprocessing.luminanceSmoothing}),M=new a.e(m.threeCamera,x,L,b),k=new a.e(m.threeCamera,w);f.addPass(new a.g(o,m.threeCamera)),f.addPass(M),f.addPass(k);const S=new v(o);["hemi"].forEach(e=>S.place(e));const C=new i.AudioListener;m.threeCamera.add(C);const E=new i.Audio(C),A=new i.Audio(C),P=new i.Audio(C),T=new Q(o,C),z=new URL(window.location.href).searchParams.get("lights")||l.block.count,H=[];for(let e=0;e<z;e++)if(0===e){const t=new W(e,E);H.push(t),o.add(t.mesh)}else{const t=new W(e);H.push(t),o.add(t.mesh)}const B=new y(e,C,H,m.threeCamera),D=new i.AudioLoader;D.load(ie.a,(function(e){E.setBuffer(e),E.setLoop(!0),E.setVolume(.5),E.play()})),D.load(de.a,(function(e){P.setBuffer(e),P.setLoop(!1),P.setVolume(.5),H[0].sound_switch.push(P)})),D.load(se.a,(function(e){A.setBuffer(e),A.setVolume(.5);const t=H.length<2?0:l.rectLight.crash.number-1;H[t].offSound(A),H[t].addParticle(T,m.threeCamera)})),D.load(Z.a,(function(e){H.forEach(t=>{const n=new i.PositionalAudio(C);n.setBuffer(e),n.setRefDistance(8),t.addSound(n)})})),D.load(ee.a,(function(e){const t=new i.PositionalAudio(C);t.setBuffer(e),t.setRefDistance(8),t.setVolume(4),H[0].addBonusSound(t)})),D.load(ne.a,(function(e){H.forEach((t,n)=>{if(n%3==0){const n=new i.PositionalAudio(C);n.setBuffer(e),n.setRefDistance(4),n.setVolume(.2),n.setLoop(!0),t.addBonusSound(n)}})})),function e(){requestAnimationFrame(e),n=t.getDelta(),function(e){r.a.update(),s.update(),T.update(e),B.update(e),g.update()}(n),f.render(n)}()}();else{const e=o.a.getWebGLErrorMessage();document.body.appendChild(e)}}]);